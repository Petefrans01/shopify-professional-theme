{% comment %}
  Section: Header avec navigation
{% endcomment %}

<header class="header" data-section-id="{{ section.id }}" data-section-type="header">
  <div class="header__wrapper page-width">
    <div class="header__logo">
      {% if section.settings.logo != blank %}
        <a href="{{ routes.root_url }}" class="header__logo-link">
          <img
            src="{{ section.settings.logo | image_url: width: 200 }}"
            alt="{{ shop.name }}"
            width="200"
            height="auto"
            loading="eager"
          >
        </a>
      {% else %}
        <a href="{{ routes.root_url }}" class="header__logo-text">
          <h1>{{ shop.name }}</h1>
        </a>
      {% endif %}
    </div>

    <nav class="header__nav" role="navigation">
      <button class="header__menu-toggle" aria-label="Menu">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <ul class="header__menu">
        {% for link in section.settings.menu.links %}
          <li class="header__menu-item {% if link.active %}active{% endif %}">
            <a href="{{ link.url }}" class="header__menu-link">
              {{ link.title }}
            </a>
            
            {% if link.links != blank %}
              <ul class="header__submenu">
                {% for child_link in link.links %}
                  <li class="header__submenu-item">
                    <a href="{{ child_link.url }}" class="header__submenu-link">
                      {{ child_link.title }}
                    </a>
                  </li>
                {% endfor %}
              </ul>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </nav>

    <div class="header__icons">
      <a href="{{ routes.search_url }}" class="header__icon" aria-label="Recherche">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16zM19 19l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>

      <a href="{{ routes.account_url }}" class="header__icon" aria-label="Compte">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M16 17v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>

      <a href="{{ routes.cart_url }}" class="header__icon header__cart" aria-label="Panier">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M7 18a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM16 18a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM1 1h3l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L19 6H5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="header__cart-count" data-cart-count>{{ cart.item_count }}</span>
      </a>
    </div>
  </div>
</header>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    }
  ]
}
{% endschema %}
